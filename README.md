# Документация для Telegram бота с уведомлениями и мониторингом

Этот бот написан на Python с использованием библиотеки `telebot` для взаимодействия с Telegram API. Он позволяет пользователям создавать расписание уведомлений и получать сообщения в заданное время. Также бот включает предустановленное расписание под названием "Дневной мониторинг", которое можно включать и выключать.

## Установка и запуск

1. Установите необходимые библиотеки:
   ```bash
   pip install pyTelegramBotAPI apscheduler
   ```
2. Сохраните код бота в файл, например `bot.py`.
3. Замените `TOKEN` на токен вашего бота.
4. Запустите бота командой:
   ```bash
   python bot.py
   ```

## Описание команд и функций

### Основные команды

| Команда      | Описание                                                                                                                                                                                              |
| ------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `/start`          | Приветственное сообщение с перечнем доступных команд.                                                                                                          |
| `/add`            | Добавить новые события в расписание. Бот попросит ввести события в формате `HH:MM Описание` каждое с новой строки. |
| `/view`           | Просмотреть текущее расписание пользователя.                                                                                                                          |
| `/delete`         | Удалить все события из расписания пользователя.                                                                                                                      |
| `/edit`           | Изменить событие в расписании (в текущей версии не реализовано).                                                                                         |
| `/monitoring_on`  | Включить предустановленный "Дневной мониторинг" с расписанием.                                                                                          |
| `/monitoring_off` | Отключить "Дневной мониторинг" и восстановить исходное расписание пользователя.                                                          |

### Функции и обработчики команд

#### `load_schedule()`

Загружает расписание из файла `schedule.json`. Если файл не существует, возвращает пустой словарь.

#### `save_schedule()`

Сохраняет текущее расписание всех пользователей в файл `schedule.json`.

#### `send_notification(chat_id, message)`

Функция для отправки уведомления в чат. Принимает `chat_id` и текст `message` для отправки.

#### `schedule_notification(chat_id, event_time, message)`

Создает задачу для отправки уведомления в заданное время `event_time`. Использует планировщик `apscheduler` для управления временем отправки.

#### Обработчик команды `/start`

Отправляет пользователю приветственное сообщение и список доступных команд.

#### Обработчик команды `/view`

Отправляет пользователю текущее расписание, если оно есть. Если расписания нет, сообщает об этом пользователю.

#### Обработчик команды `/delete`

Удаляет все события из расписания текущего пользователя и сохраняет обновленное расписание в файл.

#### Обработчик команды `/add`

Запрашивает у пользователя список событий в формате `HH:MM Описание`. После получения событий добавляет их в расписание и сохраняет в файл.

#### `add_events(message)`

Обрабатывает текстовый ответ пользователя с событиями. Каждое событие должно быть указано в формате `HH:MM Описание`. Для каждого события устанавливается уведомление.

#### Обработчик команды `/monitoring_on`

Включает предустановленное расписание "Дневного мониторинга". Сохраняет текущее расписание пользователя и заменяет его на предустановленное. События предустановленного расписания устанавливаются на текущий день.

#### Обработчик команды `/monitoring_off`

Отключает "Дневной мониторинг" и восстанавливает исходное расписание пользователя.

## Предустановленное расписание "Дневного мониторинга"

Предустановленное расписание включает события, которые запускаются в течение дня в определенное время, такие как проверка дашбордов, мониторинг отправки референсов и прочее.
